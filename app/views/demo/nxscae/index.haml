= javascript_include_tag_with_cdn "highcharts.js"
= javascript_include_tag_with_cdn "angular.min.js"
= javascript_include_tag_with_cdn "demo_nxscae_controller.js"
:css
  @import url(/stylesheets/bootstrap-glyphicons.css)

%h1 nxscae理财产品

.alert.alert-warning.alert-dismissible{role: "alert"}
  产品更新时间: #{NxscaeDayinfo.last.time rescue '-'}, 本地更新时间: #{@local_latest_update}

%div#highchart_id

%table.table.table-strip.table-condensed.table-bordered{"ng-controller" => "DemoNxscaeController"}
  %thead
    %th 序号
    %th 藏品简称
    %th{width:"15%"}
      %select{"ng-model" => "orderCurPrice"}
        %option{value:"cur_price"} 最新价格[升]
        %option{value:"-cur_price"} 最新价格[降]
    %th 涨跌幅
    %th 最高价
    %th 最低价
    %th 趋势图

  %tbody
    %tr{"ng-repeat" => "product in products | orderBy:orderCurPrice"}
      %td  {{ $index }}
      %td.fullname {{ product.fullname }}
      %td {{ product.cur_price }}
      %td {{ product.current_gains }}
      %td {{ product.high_price }}
      %td {{ product.low_price }}
      %td{style: "text-align: center", "ng-click" => "trendChart(product.code)"}
        %span.glyphicon{"ng-class" => "{true:'glyphicon-arrow-up', false:'glyphicon-arrow-down' }[product.current_gains > 0]"}


%p.text-muted
  本页面数据来自
  = link_to "nxscae", "http://nxscae.com/", target: "_blank"
  ,图表使用
  = link_to "HighChart", "http://www.highcharts.com", target: "_blank"
  ,数据处理使用
  = link_to "AngularJS", "http://angularjs.org", target: "_blank"
